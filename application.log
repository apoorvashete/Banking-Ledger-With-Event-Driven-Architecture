2024-05-03T00:03:25.475-07:00  INFO 924 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T00:03:25.507-07:00  INFO 924 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T00:03:25.548-07:00  INFO 924 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T00:03:28.270-07:00  INFO 1335 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 1335 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T00:03:28.271-07:00  INFO 1335 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T00:03:28.529-07:00  INFO 1335 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T00:03:28.554-07:00  INFO 1335 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2024-05-03T00:03:28.752-07:00  INFO 1335 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T00:03:28.758-07:00  INFO 1335 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T00:03:28.758-07:00  INFO 1335 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T00:03:28.785-07:00  INFO 1335 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T00:03:28.785-07:00  INFO 1335 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 495 ms
2024-05-03T00:03:28.853-07:00  INFO 1335 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T00:03:28.877-07:00  INFO 1335 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T00:03:28.891-07:00  INFO 1335 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T00:03:28.982-07:00  INFO 1335 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T00:03:28.993-07:00  INFO 1335 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T00:03:29.183-07:00  INFO 1335 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@314f59b
2024-05-03T00:03:29.183-07:00  INFO 1335 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T00:03:29.549-07:00  INFO 1335 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T00:03:29.617-07:00  INFO 1335 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T00:03:29.652-07:00  WARN 1335 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T00:03:29.689-07:00 DEBUG 1335 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T00:03:29.721-07:00 DEBUG 1335 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T00:03:29.736-07:00 DEBUG 1335 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T00:03:29.748-07:00 DEBUG 1335 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T00:03:29.894-07:00  INFO 1335 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T00:03:29.898-07:00  INFO 1335 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.812 seconds (process running for 2.007)
2024-05-03T00:03:53.688-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T00:03:53.689-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T00:03:53.689-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T00:03:53.690-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T00:03:53.690-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T00:03:53.692-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@23909b3
2024-05-03T00:03:53.692-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@38e052b2
2024-05-03T00:03:53.692-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T00:03:53.692-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-05-03T00:03:53.698-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:03:53.707-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:03:53.766-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@5 (truncated)...]
2024-05-03T00:03:53.777-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:53.778-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=0, currency=USD)
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:03:53.779-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=50.00, currency=USD)
2024-05-03T00:03:53.790-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:03:53.791-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@2c60d398)]
2024-05-03T00:03:53.798-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:03:56.360-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:03:56.361-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:03:56.363-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@5 (truncated)...]
2024-05-03T00:03:56.366-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T00:03:56.366-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:56.366-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:03:56.367-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=50.00, currency=USD)
2024-05-03T00:03:56.367-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:03:56.367-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:03:56.368-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T00:03:56.368-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:03:56.368-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:03:56.368-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:03:56.368-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=100.00, currency=USD)
2024-05-03T00:03:56.370-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:03:56.372-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@534b2531)]
2024-05-03T00:03:56.374-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:04:08.898-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:04:08.917-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:04:08.922-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@c (truncated)...]
2024-05-03T00:04:08.926-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=100.00, currency=USD)
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:04:08.927-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:04:08.928-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T00:04:08.928-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:04:08.928-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:04:08.928-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:04:08.928-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:04:08.929-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=250.00, currency=USD)
2024-05-03T00:04:08.932-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:04:08.932-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@294f867)]
2024-05-03T00:04:08.933-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:04:19.658-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:04:19.662-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:04:19.672-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@506c26e]
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:04:19.675-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=250.00, currency=USD)
2024-05-03T00:04:19.677-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user123', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=250.00, timestamp=2024-05-03T00:04:19.677221}
2024-05-03T00:04:19.687-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user123', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=250.00, timestamp=2024-05-03T00:04:19.677221}
2024-05-03T00:04:19.694-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:04:19.696-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@2495274b]
2024-05-03T00:04:19.701-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:05:40.770-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:05:40.777-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:05:40.787-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@436c38f8]
2024-05-03T00:05:40.794-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T00:05:40.795-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:05:40.795-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:05:40.795-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:05:40.795-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:05:40.801-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=250.00, currency=USD)
2024-05-03T00:05:40.801-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T00:05:40.801326}
2024-05-03T00:05:40.803-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T00:05:40.801326}
2024-05-03T00:05:40.806-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:05:40.806-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@49945388]
2024-05-03T00:05:40.807-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:05:43.780-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:05:43.783-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:05:43.789-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@436c178d]
2024-05-03T00:05:43.798-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T00:05:43.798-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:05:43.798-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:05:43.798-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:05:43.798-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:05:43.799-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T00:05:40.801326}
2024-05-03T00:05:43.799-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=300.00, currency=USD)
2024-05-03T00:05:43.799-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:05:43.799721}
2024-05-03T00:05:43.799-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:05:43.799721}
2024-05-03T00:05:43.800-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:05:43.801-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@c96fbab]
2024-05-03T00:05:43.802-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:05:54.350-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:05:54.351-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:05:54.353-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@1a648ae4]
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T00:05:40.801326}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:05:43.799721}
2024-05-03T00:05:54.354-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=350.00, currency=USD)
2024-05-03T00:05:54.355-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:05:54.355018}
2024-05-03T00:05:54.355-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:05:54.355018}
2024-05-03T00:05:54.356-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:05:54.356-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@14a377d8]
2024-05-03T00:05:54.357-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:06:01.268-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:06:01.275-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:06:01.291-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@30f9f116]
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:03:53.778398}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:53.779047}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:03:56.367747}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=150.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:04:08.927879}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T00:05:40.801326}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:05:43.799721}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:05:54.355018}
2024-05-03T00:06:01.296-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=400.00, currency=USD)
2024-05-03T00:06:01.297-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T00:06:01.297283}
2024-05-03T00:06:01.297-07:00  INFO 1335 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T00:06:01.297283}
2024-05-03T00:06:01.299-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:06:01.299-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@582dbc67]
2024-05-03T00:06:01.301-07:00 DEBUG 1335 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:08:24.186-07:00  INFO 1335 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T00:08:24.207-07:00  INFO 1335 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T00:08:24.240-07:00  INFO 1335 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T00:08:27.073-07:00  INFO 1489 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 1489 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T00:08:27.074-07:00  INFO 1489 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T00:08:27.331-07:00  INFO 1489 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T00:08:27.354-07:00  INFO 1489 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T00:08:27.548-07:00  INFO 1489 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T00:08:27.553-07:00  INFO 1489 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T00:08:27.554-07:00  INFO 1489 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T00:08:27.581-07:00  INFO 1489 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T00:08:27.581-07:00  INFO 1489 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 489 ms
2024-05-03T00:08:27.651-07:00  INFO 1489 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T00:08:27.676-07:00  INFO 1489 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T00:08:27.690-07:00  INFO 1489 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T00:08:27.791-07:00  INFO 1489 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T00:08:27.802-07:00  INFO 1489 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T00:08:28.008-07:00  INFO 1489 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@485451d8
2024-05-03T00:08:28.008-07:00  INFO 1489 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T00:08:28.373-07:00  INFO 1489 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T00:08:28.433-07:00  INFO 1489 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T00:08:28.461-07:00  WARN 1489 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T00:08:28.497-07:00 DEBUG 1489 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T00:08:28.532-07:00 DEBUG 1489 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T00:08:28.547-07:00 DEBUG 1489 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T00:08:28.560-07:00 DEBUG 1489 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T00:08:28.701-07:00  INFO 1489 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T00:08:28.705-07:00  INFO 1489 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.817 seconds (process running for 2.044)
2024-05-03T00:08:45.613-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T00:08:45.613-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T00:08:45.613-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T00:08:45.614-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T00:08:45.614-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T00:08:45.616-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6097f225
2024-05-03T00:08:45.617-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@37ab1b10
2024-05-03T00:08:45.617-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T00:08:45.617-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2024-05-03T00:08:45.623-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:08:45.630-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:08:45.679-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@3 (truncated)...]
2024-05-03T00:08:45.689-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T00:08:45.689-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T00:08:45.689-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=0, currency=USD)
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:45.690-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=100.00, currency=USD)
2024-05-03T00:08:45.701-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:08:45.701-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@6db2635c)]
2024-05-03T00:08:45.710-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:08:47.377-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:08:47.378-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:08:47.380-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@5 (truncated)...]
2024-05-03T00:08:47.383-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T00:08:47.383-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:47.384-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:47.384-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=100.00, currency=USD)
2024-05-03T00:08:47.385-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:08:47.385-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:08:47.385-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T00:08:47.385-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:47.386-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:47.386-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:08:47.386-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=200.00, currency=USD)
2024-05-03T00:08:47.388-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:08:47.388-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@59542904)]
2024-05-03T00:08:47.390-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:08:48.441-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T00:08:48.442-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T00:08:48.443-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@e (truncated)...]
2024-05-03T00:08:48.444-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T00:08:48.445-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=200.00, currency=USD)
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:08:48.457-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:08:48.458-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:08:48.458-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=300.00, currency=USD)
2024-05-03T00:08:48.460-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:08:48.460-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@e7af61)]
2024-05-03T00:08:48.461-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:10:04.326-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:10:04.337-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:10:04.343-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@5b8954ca]
2024-05-03T00:10:04.348-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T00:10:04.349-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:10:04.350-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:10:04.350-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:10:04.350-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:10:04.350-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=300.00, currency=USD)
2024-05-03T00:10:04.351-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:10:04.351766}
2024-05-03T00:10:04.353-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:10:04.351766}
2024-05-03T00:10:04.356-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:10:04.357-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3adabb9c]
2024-05-03T00:10:04.358-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:10:39.349-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:10:39.353-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:10:39.359-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@398ea12c]
2024-05-03T00:10:39.371-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T00:10:39.371-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:10:39.371-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:10:39.371-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:10:39.372-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:10:39.372-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:10:04.351766}
2024-05-03T00:10:39.372-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=350.00, currency=USD)
2024-05-03T00:10:39.372-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:10:39.372480}
2024-05-03T00:10:39.372-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:10:39.372480}
2024-05-03T00:10:39.374-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:10:39.375-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3749486d]
2024-05-03T00:10:39.376-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:10:41.958-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:10:41.960-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:10:41.963-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@360f251e]
2024-05-03T00:10:41.969-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T00:10:41.969-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:10:41.969-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:10:41.969-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:10:41.969-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:10:41.970-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:10:04.351766}
2024-05-03T00:10:41.970-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:10:39.372480}
2024-05-03T00:10:41.970-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=400.00, currency=USD)
2024-05-03T00:10:41.970-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T00:10:41.970608}
2024-05-03T00:10:41.970-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T00:10:41.970608}
2024-05-03T00:10:41.972-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:10:41.972-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@79f5d794]
2024-05-03T00:10:41.973-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:10:42.963-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T00:10:42.963-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T00:10:42.965-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@47ff91de]
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T00:08:45.689844}
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:45.690480}
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:47.385198}
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T00:08:48.457661}
2024-05-03T00:10:42.966-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T00:10:04.351766}
2024-05-03T00:10:42.967-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T00:10:39.372480}
2024-05-03T00:10:42.967-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T00:10:41.970608}
2024-05-03T00:10:42.967-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=450.00, currency=USD)
2024-05-03T00:10:42.967-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=400.00, timestamp=2024-05-03T00:10:42.967546}
2024-05-03T00:10:42.967-07:00  INFO 1489 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user123', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=400.00, timestamp=2024-05-03T00:10:42.967546}
2024-05-03T00:10:42.968-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T00:10:42.968-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@49386751]
2024-05-03T00:10:42.969-07:00 DEBUG 1489 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T00:11:18.127-07:00  INFO 1489 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T00:11:18.133-07:00  INFO 1489 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T00:11:18.155-07:00  INFO 1489 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T12:17:04.758-07:00  INFO 4206 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 4206 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T12:17:04.759-07:00  INFO 4206 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T12:17:05.144-07:00  INFO 4206 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T12:17:05.167-07:00  INFO 4206 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T12:17:05.462-07:00  INFO 4206 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T12:17:05.468-07:00  INFO 4206 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T12:17:05.468-07:00  INFO 4206 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T12:17:05.496-07:00  INFO 4206 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T12:17:05.496-07:00  INFO 4206 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 718 ms
2024-05-03T12:17:05.566-07:00  INFO 4206 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T12:17:05.596-07:00  INFO 4206 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T12:17:05.609-07:00  INFO 4206 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T12:17:05.702-07:00  INFO 4206 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T12:17:05.713-07:00  INFO 4206 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T12:17:05.990-07:00  INFO 4206 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@260d48f5
2024-05-03T12:17:05.991-07:00  INFO 4206 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T12:17:06.380-07:00  INFO 4206 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T12:17:06.452-07:00  INFO 4206 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:17:06.481-07:00  WARN 4206 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T12:17:06.518-07:00 DEBUG 4206 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T12:17:06.554-07:00 DEBUG 4206 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T12:17:06.568-07:00 DEBUG 4206 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T12:17:06.581-07:00 DEBUG 4206 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T12:17:06.724-07:00  INFO 4206 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T12:17:06.728-07:00  INFO 4206 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 2.148 seconds (process running for 2.323)
2024-05-03T12:17:26.898-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T12:17:26.900-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T12:17:26.900-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T12:17:26.900-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T12:17:26.900-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T12:17:26.902-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@28d97205
2024-05-03T12:17:26.902-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@13f7c165
2024-05-03T12:17:26.902-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T12:17:26.902-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-05-03T12:17:26.908-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:17:26.915-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:17:26.988-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@205 (truncated)...]
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:17:27.032-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=0, currency=USD)
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:27.033-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:17:27.047-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:17:27.048-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@5eadd814)]
2024-05-03T12:17:27.056-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:17:38.946-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:17:38.950-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:17:38.955-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@579 (truncated)...]
2024-05-03T12:17:38.961-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:38.962-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:38.963-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:17:38.965-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:17:38.966-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@59542904)]
2024-05-03T12:17:38.968-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:17:40.473-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:17:40.474-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:17:40.475-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@e20 (truncated)...]
2024-05-03T12:17:40.476-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:17:40.476-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:40.476-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:40.476-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:40.476-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:40.477-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:17:40.479-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=300.00, currency=USD)
2024-05-03T12:17:40.481-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:17:40.482-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@e7af61)]
2024-05-03T12:17:40.483-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:17:42.464-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:17:42.465-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:17:42.466-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@463 (truncated)...]
2024-05-03T12:17:42.469-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:17:42.469-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:42.469-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:42.469-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:42.469-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=300.00, currency=USD)
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:17:42.470-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:17:42.471-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:17:42.471-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:17:42.471-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:17:42.472-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=400.00, currency=USD)
2024-05-03T12:17:42.474-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:17:42.474-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@48fe0c23)]
2024-05-03T12:17:42.475-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:18:01.365-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:18:01.367-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:18:01.371-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@5b8954ca]
2024-05-03T12:18:01.381-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:18:01.381-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:18:01.385-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user123', messageId='msg001', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:18:01.385192}
2024-05-03T12:18:01.397-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user123', messageId='msg001', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:18:01.385192}
2024-05-03T12:18:01.400-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:18:01.401-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@6380bdff]
2024-05-03T12:18:01.403-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:18:35.954-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:18:35.958-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:18:35.964-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@627a9fa1]
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:18:35.970-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:18:35.973-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=400.00, currency=USD)
2024-05-03T12:18:35.973-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T12:18:35.973553}
2024-05-03T12:18:35.975-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T12:18:35.973553}
2024-05-03T12:18:35.978-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:18:35.978-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@1b316223]
2024-05-03T12:18:35.988-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:18:47.106-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:18:47.107-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:18:47.108-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@398ea12c]
2024-05-03T12:18:47.110-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:18:47.110-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:18:47.110-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:18:47.111-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:18:47.111-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:18:47.111-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:18:47.111-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T12:18:35.973553}
2024-05-03T12:18:47.113-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=450.00, currency=USD)
2024-05-03T12:18:47.114-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=400.00, timestamp=2024-05-03T12:18:47.114088}
2024-05-03T12:18:47.114-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=400.00, timestamp=2024-05-03T12:18:47.114088}
2024-05-03T12:18:47.118-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:18:47.119-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3749486d]
2024-05-03T12:18:47.120-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:18:51.322-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:18:51.324-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:18:51.331-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@3cf74e6e]
2024-05-03T12:18:51.336-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:18:51.336-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:17:27.032577}
2024-05-03T12:18:51.336-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:27.033299}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:38.962560}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:40.477131}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:17:42.470274}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=350.00, timestamp=2024-05-03T12:18:35.973553}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=400.00, timestamp=2024-05-03T12:18:47.114088}
2024-05-03T12:18:51.337-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=500.00, currency=USD)
2024-05-03T12:18:51.338-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=450.00, timestamp=2024-05-03T12:18:51.338003}
2024-05-03T12:18:51.338-07:00  INFO 4206 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=450.00, timestamp=2024-05-03T12:18:51.338003}
2024-05-03T12:18:51.339-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:18:51.340-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@4846acb8]
2024-05-03T12:18:51.341-07:00 DEBUG 4206 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:26:40.351-07:00  INFO 4206 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:26:40.368-07:00  INFO 4206 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T12:26:40.401-07:00  INFO 4206 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T12:26:43.496-07:00  INFO 4460 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 4460 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T12:26:43.497-07:00  INFO 4460 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T12:26:43.757-07:00  INFO 4460 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T12:26:43.780-07:00  INFO 4460 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T12:26:43.976-07:00  INFO 4460 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T12:26:43.982-07:00  INFO 4460 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T12:26:43.982-07:00  INFO 4460 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T12:26:44.010-07:00  INFO 4460 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T12:26:44.010-07:00  INFO 4460 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 493 ms
2024-05-03T12:26:44.078-07:00  INFO 4460 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T12:26:44.103-07:00  INFO 4460 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T12:26:44.118-07:00  INFO 4460 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T12:26:44.211-07:00  INFO 4460 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T12:26:44.221-07:00  INFO 4460 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T12:26:44.405-07:00  INFO 4460 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3e39e0fb
2024-05-03T12:26:44.406-07:00  INFO 4460 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T12:26:44.768-07:00  INFO 4460 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T12:26:44.826-07:00  INFO 4460 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:26:44.856-07:00  WARN 4460 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T12:26:44.892-07:00 DEBUG 4460 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T12:26:44.924-07:00 DEBUG 4460 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T12:26:44.938-07:00 DEBUG 4460 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T12:26:44.951-07:00 DEBUG 4460 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T12:26:45.094-07:00  INFO 4460 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T12:26:45.098-07:00  INFO 4460 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.78 seconds (process running for 1.975)
2024-05-03T12:26:55.847-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T12:26:55.848-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T12:26:55.848-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T12:26:55.848-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T12:26:55.848-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T12:26:55.852-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6dd1f239
2024-05-03T12:26:55.852-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@43312512
2024-05-03T12:26:55.852-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T12:26:55.853-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2024-05-03T12:26:55.860-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:26:55.868-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:26:55.919-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@186 (truncated)...]
2024-05-03T12:26:55.928-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:26:55.928-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:26:55.928-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:26:55.928-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=0, currency=USD)
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:26:55.929-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:26:55.939-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:26:55.939-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@24fdcca5)]
2024-05-03T12:26:55.947-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:26:57.701-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:26:57.701-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:26:57.704-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@1ef (truncated)...]
2024-05-03T12:26:57.706-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:26:57.706-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:57.707-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:26:57.707-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:26:57.707-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:26:57.708-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:57.707864}
2024-05-03T12:26:57.708-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:57.707864}
2024-05-03T12:26:57.709-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:26:57.709-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:26:57.709-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:26:57.709-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:57.707864}
2024-05-03T12:26:57.710-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:26:57.712-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:26:57.712-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@f2821bf)]
2024-05-03T12:26:57.714-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:27:05.814-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:27:05.816-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:27:05.819-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@9d4a4ed]
2024-05-03T12:27:05.823-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:27:05.823-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:27:05.823-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:27:05.823-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:57.707864}
2024-05-03T12:27:05.824-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:27:05.826-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:27:05.826-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:27:05.826333}
2024-05-03T12:27:05.828-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:27:05.826333}
2024-05-03T12:27:05.832-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:27:05.833-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@55b45506]
2024-05-03T12:27:05.834-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:27:07.497-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:27:07.498-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:27:07.500-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@436c38f8]
2024-05-03T12:27:07.502-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:27:07.502-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:26:55.928780}
2024-05-03T12:27:07.502-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:55.929450}
2024-05-03T12:27:07.503-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:26:57.707864}
2024-05-03T12:27:07.503-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:27:05.826333}
2024-05-03T12:27:07.504-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=250.00, currency=USD)
2024-05-03T12:27:07.504-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:27:07.504-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T12:27:07.504401}
2024-05-03T12:27:07.504-07:00  INFO 4460 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=200.00, timestamp=2024-05-03T12:27:07.504401}
2024-05-03T12:27:07.506-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:27:07.506-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@4dabcee5]
2024-05-03T12:27:07.507-07:00 DEBUG 4460 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:30:19.307-07:00  INFO 4460 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:30:19.311-07:00  INFO 4460 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T12:30:19.317-07:00  INFO 4460 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T12:35:27.168-07:00  INFO 4676 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 4676 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T12:35:27.169-07:00  INFO 4676 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T12:35:27.429-07:00  INFO 4676 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T12:35:27.452-07:00  INFO 4676 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T12:35:27.647-07:00  INFO 4676 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T12:35:27.652-07:00  INFO 4676 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T12:35:27.652-07:00  INFO 4676 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T12:35:27.681-07:00  INFO 4676 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T12:35:27.682-07:00  INFO 4676 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 493 ms
2024-05-03T12:35:27.778-07:00  INFO 4676 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T12:35:27.806-07:00  INFO 4676 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T12:35:27.819-07:00  INFO 4676 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T12:35:27.910-07:00  INFO 4676 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T12:35:27.920-07:00  INFO 4676 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T12:35:28.126-07:00  INFO 4676 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@601d295
2024-05-03T12:35:28.127-07:00  INFO 4676 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T12:35:28.491-07:00  INFO 4676 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T12:35:28.552-07:00  INFO 4676 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:35:28.581-07:00  WARN 4676 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T12:35:28.618-07:00 DEBUG 4676 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T12:35:28.651-07:00 DEBUG 4676 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T12:35:28.666-07:00 DEBUG 4676 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T12:35:28.678-07:00 DEBUG 4676 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T12:35:28.826-07:00  INFO 4676 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T12:35:28.830-07:00  INFO 4676 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.857 seconds (process running for 2.072)
2024-05-03T12:35:38.738-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T12:35:38.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T12:35:38.743-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T12:35:38.743-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T12:35:38.743-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T12:35:38.747-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74a991cf
2024-05-03T12:35:38.748-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@30e15628
2024-05-03T12:35:38.748-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T12:35:38.749-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2024-05-03T12:35:38.756-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:35:38.763-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:35:38.805-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@369 (truncated)...]
2024-05-03T12:35:38.814-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:35:38.814-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=0, currency=USD)
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:35:38.815-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:38.816-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:38.816-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:35:38.816-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:38.816-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:38.816-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:35:38.825-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:38.826-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@6bf3ed2b)]
2024-05-03T12:35:38.834-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:35:40.651-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:35:40.652-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:35:40.654-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@1ef (truncated)...]
2024-05-03T12:35:40.656-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:35:40.657-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:40.657-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:40.657-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:35:40.657-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:35:40.657-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:40.658-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:40.658-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:35:40.658-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:40.658-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:40.660-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:40.661-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:35:40.663-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:40.664-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@f2821bf)]
2024-05-03T12:35:40.665-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:35:47.082-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:35:47.083-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:35:47.088-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@9d4a4ed]
2024-05-03T12:35:47.090-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:35:47.090-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:47.090-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:47.090-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:47.090-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:35:47.092-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:35:47.092-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:35:47.093-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:35:47.098-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:47.098-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@55b45506]
2024-05-03T12:35:47.099-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:35:47.925-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:35:47.926-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:35:47.928-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@436c38f8]
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=150.00, currency=USD)
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:35:47.929-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:35:47.930-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:47.931-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@4dabcee5]
2024-05-03T12:35:47.932-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:35:48.805-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:35:48.806-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:35:48.808-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@436c178d]
2024-05-03T12:35:48.810-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:35:48.810-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:48.810-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:48.811-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:48.811-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:35:48.811-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:35:48.811-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:35:48.812-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:35:48.812-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:35:48.812-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:35:48.814-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:48.814-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@4dabf190]
2024-05-03T12:35:48.815-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:35:54.744-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:35:54.747-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:35:54.750-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@1a648ae4]
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:35:54.754-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:35:54.755-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=50.00, currency=USD)
2024-05-03T12:35:54.757-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:35:54.757-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user1', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=50.00, timestamp=2024-05-03T12:35:54.757463}
2024-05-03T12:35:54.771-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user1', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=50.00, timestamp=2024-05-03T12:35:54.757463}
2024-05-03T12:35:54.772-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:35:54.772-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@20d60f48]
2024-05-03T12:35:54.773-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.221-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:36:55.225-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:36:55.230-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@463 (truncated)...]
2024-05-03T12:36:55.234-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=50.00, currency=USD)
2024-05-03T12:36:55.235-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.236-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=150.00, currency=USD)
2024-05-03T12:36:55.238-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.238-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@48fe0c23)]
2024-05-03T12:36:55.240-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.264-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:36:55.265-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:36:55.279-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=2, transactionAmount=apoorva.current.banking.dto.Amount@3c735dc2)]
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 9
2024-05-03T12:36:55.283-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=0, currency=USD)
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 9
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 10
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.284-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:36:55.284-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.285-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=2, balance=apoorva.current.banking.dto.Amount@53f43675)]
2024-05-03T12:36:55.285-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.299-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:36:55.299-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:36:55.300-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=3, messageId=6, transactionAmount=apoorva.current.banking.dto.Amount@43a01328)]
2024-05-03T12:36:55.300-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 10
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 10
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 11
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=0, currency=USD)
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 11
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 12
2024-05-03T12:36:55.301-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:36:55.302-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:36:55.302-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:36:55.303-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.303-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=3, messageId=6, balance=apoorva.current.banking.dto.Amount@78517930)]
2024-05-03T12:36:55.304-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.319-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:36:55.319-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:36:55.321-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=1, transactionAmount=apoorva.current.banking.dto.Amount@b17a482)]
2024-05-03T12:36:55.322-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 12
2024-05-03T12:36:55.322-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.322-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.322-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 12
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 13
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:36:55.323-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=103.23, currency=USD)
2024-05-03T12:36:55.324-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.325-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=1, balance=apoorva.current.banking.dto.Amount@4e152b84)]
2024-05-03T12:36:55.326-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.338-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:36:55.339-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:36:55.340-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@79eb6091]
2024-05-03T12:36:55.341-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 13
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=150.00, currency=USD)
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 13
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:36:55.342-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:36:55.344-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.344-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@2d5cc5fa]
2024-05-03T12:36:55.345-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.357-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:36:55.358-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:36:55.359-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@49945388]
2024-05-03T12:36:55.360-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 14
2024-05-03T12:36:55.360-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.360-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.360-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:36:55.360-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=103.23, currency=USD)
2024-05-03T12:36:55.361-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 14
2024-05-03T12:36:55.361-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:36:55.361-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:36:55.362-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.362-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@c96c4de]
2024-05-03T12:36:55.363-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.377-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:36:55.377-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:36:55.379-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@49947cfd]
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 15
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 15
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=3.23, timestamp=2024-05-03T12:36:55.380680}
2024-05-03T12:36:55.380-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=3.23, timestamp=2024-05-03T12:36:55.380680}
2024-05-03T12:36:55.381-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.382-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@c96fbab]
2024-05-03T12:36:55.382-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.398-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:36:55.399-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:36:55.400-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@77853224]
2024-05-03T12:36:55.401-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 16
2024-05-03T12:36:55.401-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:36:55.401-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 16
2024-05-03T12:36:55.401-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:36:55.401436}
2024-05-03T12:36:55.401-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:36:55.401436}
2024-05-03T12:36:55.402-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.402-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3554b16]
2024-05-03T12:36:55.403-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.420-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:36:55.420-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:36:55.421-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@5793cd86]
2024-05-03T12:36:55.422-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 17
2024-05-03T12:36:55.422-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:36:55.422-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:36:55.422-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:36:55.423-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 17
2024-05-03T12:36:55.423-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:36:55.423-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:36:55.424-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.424-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@59542904]
2024-05-03T12:36:55.424-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:36:55.437-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:36:55.438-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:36:55.439-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@4d8 (truncated)...]
2024-05-03T12:36:55.440-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 18
2024-05-03T12:36:55.441-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:36:55.441-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:36:55.441-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:36:55.442-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:36:55.443-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 18
2024-05-03T12:36:55.443-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:36:55.443-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:36:55.443-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 19
2024-05-03T12:36:55.444-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:36:55.445-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:36:55.446-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:36:55.446-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@41daa55a)]
2024-05-03T12:36:55.448-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:37:22.726-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:37:22.730-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:37:22.735-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user123, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@4 (truncated)...]
2024-05-03T12:37:22.740-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 19
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 19
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T12:37:22.741388}
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T12:37:22.741388}
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 20
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T12:37:22.741388}
2024-05-03T12:37:22.741-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=0, currency=USD)
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 20
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:37:22.742021}
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:37:22.742021}
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 21
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user123', initialBalance=0, currency='USD', timestamp=2024-05-03T12:37:22.741388}
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user123', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:37:22.742021}
2024-05-03T12:37:22.742-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user123, balance=100.00, currency=USD)
2024-05-03T12:37:22.744-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:37:22.746-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user123, messageId=msg002, balance=apoorva.current.banking.dto.Amount@9c30618)]
2024-05-03T12:37:22.755-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.502-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:24.505-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:24.510-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@3ac (truncated)...]
2024-05-03T12:38:24.515-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 21
2024-05-03T12:38:24.516-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:38:24.516-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:38:24.516-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:38:24.517-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=200.00, currency=USD)
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 21
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 22
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.518-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=300.00, currency=USD)
2024-05-03T12:38:24.520-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.520-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@4927c4e3)]
2024-05-03T12:38:24.522-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.545-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:24.547-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:24.547-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=2, transactionAmount=apoorva.current.banking.dto.Amount@28c65199)]
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 22
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 22
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 23
2024-05-03T12:38:24.549-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.550-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.550-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.550-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.550-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.550-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=6.46, currency=USD)
2024-05-03T12:38:24.551-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.551-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=2, balance=apoorva.current.banking.dto.Amount@5f2d3de2)]
2024-05-03T12:38:24.551-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.566-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:24.566-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:24.567-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=3, messageId=6, transactionAmount=apoorva.current.banking.dto.Amount@2e1f864c)]
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 23
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=0.00, currency=USD)
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 23
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 24
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:38:24.568-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:38:24.569-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.569-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=3, messageId=6, balance=apoorva.current.banking.dto.Amount@3d50a98c)]
2024-05-03T12:38:24.569-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.583-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:24.583-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:24.584-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=1, transactionAmount=apoorva.current.banking.dto.Amount@2fe555cb)]
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 24
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.584-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=6.46, currency=USD)
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 24
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 25
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:24.585-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=106.46, currency=USD)
2024-05-03T12:38:24.586-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.586-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=1, balance=apoorva.current.banking.dto.Amount@3dd016d6)]
2024-05-03T12:38:24.586-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.597-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:38:24.598-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:38:24.598-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@52612257]
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 25
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=300.00, currency=USD)
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 25
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T12:38:24.599383}
2024-05-03T12:38:24.599-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T12:38:24.599383}
2024-05-03T12:38:24.600-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.600-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@425dcb1c]
2024-05-03T12:38:24.600-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.613-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:38:24.613-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:38:24.614-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@5d6ba6f6]
2024-05-03T12:38:24.614-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 26
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=106.46, currency=USD)
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 26
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:38:24.617-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:38:24.618-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.618-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@1869233f]
2024-05-03T12:38:24.618-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.631-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:38:24.631-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:38:24.632-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@2e15d574]
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 27
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=6.46, currency=USD)
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 27
2024-05-03T12:38:24.632-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=6.46, timestamp=2024-05-03T12:38:24.632857}
2024-05-03T12:38:24.635-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=6.46, timestamp=2024-05-03T12:38:24.632857}
2024-05-03T12:38:24.636-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.636-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@25bb0751]
2024-05-03T12:38:24.636-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.648-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:38:24.650-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:38:24.651-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@a7a0ee]
2024-05-03T12:38:24.651-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 28
2024-05-03T12:38:24.651-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:38:24.651-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 28
2024-05-03T12:38:24.651-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:38:24.651683}
2024-05-03T12:38:24.651-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:38:24.651683}
2024-05-03T12:38:24.652-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.652-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@38002bcd]
2024-05-03T12:38:24.652-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.664-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:38:24.664-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:38:24.665-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@1e4d74dc]
2024-05-03T12:38:24.665-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 29
2024-05-03T12:38:24.665-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:38:24.665-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:38:24.665-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:38:24.666-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:38:24.666-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:38:24.666-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 29
2024-05-03T12:38:24.666-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:38:24.666071}
2024-05-03T12:38:24.666-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:38:24.666071}
2024-05-03T12:38:24.666-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.666-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@6c78befe]
2024-05-03T12:38:24.667-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:24.680-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:24.680-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:24.681-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@499 (truncated)...]
2024-05-03T12:38:24.681-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 30
2024-05-03T12:38:24.681-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T12:38:24.599383}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=250.00, currency=USD)
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 30
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.682652}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.682652}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 31
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:35:38.815277}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:38.815936}
2024-05-03T12:38:24.682-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:35:40.657681}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T12:35:47.092005}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:35:47.929813}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:35:48.811999}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.235965}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=100.00, timestamp=2024-05-03T12:36:55.342592}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.443033}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.517994}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T12:38:24.599383}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.682652}
2024-05-03T12:38:24.683-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=350.00, currency=USD)
2024-05-03T12:38:24.685-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:24.685-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@2e3ad4cb)]
2024-05-03T12:38:24.686-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:38:52.770-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:38:52.774-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:38:52.779-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=1, transactionAmount=apoorva.current.banking.dto.Amount@5c1f39f0)]
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 31
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:52.784-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=6.46, currency=USD)
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 31
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 32
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:38:52.785-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=106.46, currency=USD)
2024-05-03T12:38:52.787-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:38:52.787-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=1, balance=apoorva.current.banking.dto.Amount@135f1afa)]
2024-05-03T12:38:52.788-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:08.634-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:39:08.636-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:39:08.642-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=2, transactionAmount=apoorva.current.banking.dto.Amount@7d60317e)]
2024-05-03T12:39:08.647-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 32
2024-05-03T12:39:08.647-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=106.46, currency=USD)
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 32
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:08.648825}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:08.648825}
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 33
2024-05-03T12:39:08.648-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:08.648825}
2024-05-03T12:39:08.649-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=109.69, currency=USD)
2024-05-03T12:39:08.651-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:08.651-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=2, balance=apoorva.current.banking.dto.Amount@3658483d)]
2024-05-03T12:39:08.653-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:24.468-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:39:24.471-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:39:24.477-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@5633b5bd]
2024-05-03T12:39:24.481-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 33
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:08.648825}
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=109.69, currency=USD)
2024-05-03T12:39:24.482-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 33
2024-05-03T12:39:24.483-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='1', messageId='3', amountAuthorized=100.00, currency='USD', newBalance=9.69, timestamp=2024-05-03T12:39:24.482979}
2024-05-03T12:39:24.483-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='1', messageId='3', amountAuthorized=100.00, currency='USD', newBalance=9.69, timestamp=2024-05-03T12:39:24.482979}
2024-05-03T12:39:24.484-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:24.485-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@6cb93b91]
2024-05-03T12:39:24.486-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:31.096-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:39:31.097-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:39:31.101-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@2e30ac22]
2024-05-03T12:39:31.103-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 34
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.283863}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.284056}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.323020}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:36:55.361070}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.549899}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.585020}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=6.46, timestamp=2024-05-03T12:38:24.617692}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:52.785280}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:08.648825}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='3', amountAuthorized=100.00, currency='USD', newBalance=9.69, timestamp=2024-05-03T12:39:24.482979}
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=9.69, currency=USD)
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 34
2024-05-03T12:39:31.104-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='1', messageId='4', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=9.69, timestamp=2024-05-03T12:39:31.104906}
2024-05-03T12:39:31.105-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='1', messageId='4', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=9.69, timestamp=2024-05-03T12:39:31.104906}
2024-05-03T12:39:31.106-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:31.107-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@62df7516]
2024-05-03T12:39:31.109-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:39.198-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:39:39.199-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:39:39.201-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@1c17d561]
2024-05-03T12:39:39.203-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 35
2024-05-03T12:39:39.203-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:39:39.203-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 35
2024-05-03T12:39:39.203-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:39:39.203435}
2024-05-03T12:39:39.203-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:39:39.203435}
2024-05-03T12:39:39.205-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:39.205-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3533300e]
2024-05-03T12:39:39.207-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:48.373-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:39:48.376-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:39:48.384-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=3, messageId=6, transactionAmount=apoorva.current.banking.dto.Amount@3742f2e9)]
2024-05-03T12:39:48.388-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 36
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:38:24.666071}
2024-05-03T12:39:48.389-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=0.00, currency=USD)
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 36
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:48.390066}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:48.390066}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 37
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:38:24.666071}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:48.390066}
2024-05-03T12:39:48.390-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:39:48.392-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:48.393-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=3, messageId=6, balance=apoorva.current.banking.dto.Amount@1e8ac177)]
2024-05-03T12:39:48.395-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:39:53.897-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:39:53.898-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:39:53.899-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@6317ee95]
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 37
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:36:55.301258}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:36:55.301743}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:36:55.423025}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:38:24.568474}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:38:24.666071}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:39:48.390066}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 37
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:39:53.900789}
2024-05-03T12:39:53.900-07:00  INFO 4676 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:39:53.900789}
2024-05-03T12:39:53.901-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:39:53.901-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@6e735077]
2024-05-03T12:39:53.902-07:00 DEBUG 4676 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:40:09.760-07:00  INFO 4676 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:40:09.763-07:00  INFO 4676 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T12:40:09.772-07:00  INFO 4676 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T12:44:14.429-07:00  INFO 4917 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 4917 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T12:44:14.431-07:00  INFO 4917 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T12:44:14.686-07:00  INFO 4917 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T12:44:14.710-07:00  INFO 4917 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 2 JPA repository interfaces.
2024-05-03T12:44:14.915-07:00  INFO 4917 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T12:44:14.925-07:00  INFO 4917 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T12:44:14.925-07:00  INFO 4917 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T12:44:14.952-07:00  INFO 4917 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T12:44:14.953-07:00  INFO 4917 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 503 ms
2024-05-03T12:44:15.025-07:00  INFO 4917 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T12:44:15.049-07:00  INFO 4917 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T12:44:15.063-07:00  INFO 4917 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T12:44:15.153-07:00  INFO 4917 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T12:44:15.163-07:00  INFO 4917 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T12:44:15.367-07:00  INFO 4917 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@601d295
2024-05-03T12:44:15.368-07:00  INFO 4917 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T12:44:15.724-07:00  INFO 4917 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T12:44:15.786-07:00  INFO 4917 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T12:44:15.814-07:00  WARN 4917 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T12:44:15.851-07:00 DEBUG 4917 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T12:44:15.885-07:00 DEBUG 4917 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T12:44:15.899-07:00 DEBUG 4917 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T12:44:15.913-07:00 DEBUG 4917 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T12:44:16.056-07:00  INFO 4917 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T12:44:16.060-07:00  INFO 4917 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.814 seconds (process running for 2.042)
2024-05-03T12:44:25.525-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T12:44:25.525-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T12:44:25.525-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T12:44:25.525-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T12:44:25.525-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T12:44:25.527-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74a991cf
2024-05-03T12:44:25.527-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@30e15628
2024-05-03T12:44:25.527-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T12:44:25.527-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-05-03T12:44:25.532-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:44:25.538-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:44:25.582-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@232 (truncated)...]
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.595-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=0, currency=USD)
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.596-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-1] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:44:25.606-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.606-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@17680d72)]
2024-05-03T12:44:25.614-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.636-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:44:25.636-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:44:25.637-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=2, transactionAmount=apoorva.current.banking.dto.Amount@24e1fe66)]
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=0, currency=USD)
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.638-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-3] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:44:25.639-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.639-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=2, balance=apoorva.current.banking.dto.Amount@2a26048a)]
2024-05-03T12:44:25.639-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.653-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:44:25.654-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:44:25.655-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=3, messageId=6, transactionAmount=apoorva.current.banking.dto.Amount@798b4fde)]
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.655768}
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.655768}
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.655768}
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=0, currency=USD)
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.655923}
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.655923}
2024-05-03T12:44:25.655-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:44:25.656-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.655768}
2024-05-03T12:44:25.656-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.655923}
2024-05-03T12:44:25.656-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-4] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:44:25.656-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.656-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=3, messageId=6, balance=apoorva.current.banking.dto.Amount@774cbe9f)]
2024-05-03T12:44:25.657-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.670-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:44:25.671-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:44:25.671-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=1, messageId=1, transactionAmount=apoorva.current.banking.dto.Amount@2acf9045)]
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.672697}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.672697}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.672697}
2024-05-03T12:44:25.672-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-5] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=103.23, currency=USD)
2024-05-03T12:44:25.673-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.673-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=1, messageId=1, balance=apoorva.current.banking.dto.Amount@24087b6c)]
2024-05-03T12:44:25.674-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.687-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:44:25.687-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:44:25.688-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@7c682dcf]
2024-05-03T12:44:25.689-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:44:25.689-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.689-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.689-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=100.00, currency=USD)
2024-05-03T12:44:25.689-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T12:44:25.690-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:44:25.689967}
2024-05-03T12:44:25.690-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:44:25.689967}
2024-05-03T12:44:25.691-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.691-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@3119fd39]
2024-05-03T12:44:25.692-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.705-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:44:25.706-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:44:25.706-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@579f6fbc]
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.672697}
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=103.23, currency=USD)
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 8
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:44:25.707495}
2024-05-03T12:44:25.707-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:44:25.707495}
2024-05-03T12:44:25.708-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.708-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@18659104]
2024-05-03T12:44:25.708-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.720-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:44:25.721-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:44:25.721-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@44be3369]
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 9
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.638445}
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='2', amountLoaded=3.23, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.638635}
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='1', messageId='1', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.672697}
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='1', messageId='4', amountAuthorized=100.00, currency='USD', newBalance=3.23, timestamp=2024-05-03T12:44:25.707495}
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=1, balance=3.23, currency=USD)
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 9
2024-05-03T12:44:25.722-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=3.23, timestamp=2024-05-03T12:44:25.722812}
2024-05-03T12:44:25.724-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='1', messageId='3', amountAttempted=100.00, currency='USD', reason='Insufficient funds', currentBalance=3.23, timestamp=2024-05-03T12:44:25.722812}
2024-05-03T12:44:25.725-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.725-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@4c2a69e4]
2024-05-03T12:44:25.725-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.737-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:44:25.737-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:44:25.738-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@659eebba]
2024-05-03T12:44:25.739-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 10
2024-05-03T12:44:25.739-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-9] a.current.banking.service.EventReplayer  : Final account state: null
2024-05-03T12:44:25.739-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 10
2024-05-03T12:44:25.739-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:44:25.739241}
2024-05-03T12:44:25.739-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-9] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='2', messageId='5', amountAttempted=50.01, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T12:44:25.739241}
2024-05-03T12:44:25.740-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.740-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@11f6aa85]
2024-05-03T12:44:25.740-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.753-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T12:44:25.754-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T12:44:25.754-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@23ad17c7]
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 11
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='3', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.655768}
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='3', messageId='6', amountLoaded=50.01, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.655923}
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=3, balance=50.01, currency=USD)
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 11
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:44:25.755599}
2024-05-03T12:44:25.755-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-10] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='3', messageId='7', amountAuthorized=50.01, currency='USD', newBalance=0.00, timestamp=2024-05-03T12:44:25.755599}
2024-05-03T12:44:25.756-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.757-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@66af8dd6]
2024-05-03T12:44:25.757-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T12:44:25.771-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T12:44:25.771-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T12:44:25.771-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@4cc (truncated)...]
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 12
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:44:25.689967}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=50.00, currency=USD)
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 12
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.772719}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.772719}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 13
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied AccountCreatedEvent: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T12:44:25.595454}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.596090}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied TransactionAuthorizedEvent: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=50.00, timestamp=2024-05-03T12:44:25.689967}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Applied FundsLoadedEvent: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T12:44:25.772719}
2024-05-03T12:44:25.772-07:00  INFO 4917 --- [banking-app] [http-nio-8080-exec-2] a.current.banking.service.EventReplayer  : Final account state: Account(accountId=null, userId=user1, balance=150.00, currency=USD)
2024-05-03T12:44:25.773-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T12:44:25.773-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@5210645f)]
2024-05-03T12:44:25.774-07:00 DEBUG 4917 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T13:07:08.153-07:00  WARN 4917 --- [banking-app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m52s471ms).
2024-05-03T13:16:21.856-07:00  INFO 4917 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T13:16:21.879-07:00  INFO 4917 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T13:16:21.920-07:00  INFO 4917 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T15:24:28.951-07:00  INFO 7156 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 7156 (/Users/apoorvashete/Downloads/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T15:24:28.953-07:00  INFO 7156 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T15:24:29.227-07:00  INFO 7156 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T15:24:29.250-07:00  INFO 7156 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T15:24:29.449-07:00  INFO 7156 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T15:24:29.454-07:00  INFO 7156 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T15:24:29.454-07:00  INFO 7156 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T15:24:29.483-07:00  INFO 7156 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T15:24:29.483-07:00  INFO 7156 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 509 ms
2024-05-03T15:24:29.557-07:00  INFO 7156 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T15:24:29.583-07:00  INFO 7156 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T15:24:29.596-07:00  INFO 7156 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T15:24:29.688-07:00  INFO 7156 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T15:24:29.698-07:00  INFO 7156 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T15:24:29.908-07:00  INFO 7156 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@601d295
2024-05-03T15:24:29.908-07:00  INFO 7156 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T15:24:30.282-07:00  INFO 7156 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T15:24:30.347-07:00  INFO 7156 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T15:24:30.376-07:00  WARN 7156 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T15:24:30.414-07:00 DEBUG 7156 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T15:24:30.445-07:00 DEBUG 7156 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T15:24:30.460-07:00 DEBUG 7156 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T15:24:30.472-07:00 DEBUG 7156 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T15:24:30.618-07:00  INFO 7156 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T15:24:30.622-07:00  INFO 7156 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 1.855 seconds (process running for 2.047)
2024-05-03T15:24:46.714-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T15:24:46.715-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T15:24:46.715-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T15:24:46.715-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T15:24:46.715-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T15:24:46.717-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74a991cf
2024-05-03T15:24:46.717-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@30e15628
2024-05-03T15:24:46.717-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T15:24:46.717-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-05-03T15:24:46.723-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T15:24:46.733-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T15:24:46.786-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@175 (truncated)...]
2024-05-03T15:24:46.825-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T15:24:46.825-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T15:24:46.825500}
2024-05-03T15:24:46.825-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T15:24:46.825500}
2024-05-03T15:24:46.825-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T15:24:46.825-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:46.825949}
2024-05-03T15:24:46.826-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:46.825949}
2024-05-03T15:24:46.826-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-2] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T15:24:46.839-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:24:46.839-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@336ed9d1)]
2024-05-03T15:24:46.848-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:24:48.769-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T15:24:48.770-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T15:24:48.772-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@35f (truncated)...]
2024-05-03T15:24:48.773-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T15:24:48.774-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:48.774186}
2024-05-03T15:24:48.774-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:48.774186}
2024-05-03T15:24:48.774-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T15:24:48.775-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:24:48.776-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@d98ab60)]
2024-05-03T15:24:48.777-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:24:49.539-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T15:24:49.540-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T15:24:49.543-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@7f7 (truncated)...]
2024-05-03T15:24:49.546-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T15:24:49.546-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:49.546906}
2024-05-03T15:24:49.547-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:24:49.546906}
2024-05-03T15:24:49.547-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T15:24:49.549-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:24:49.549-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@71b00546)]
2024-05-03T15:24:49.550-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:25:08.737-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T15:25:08.742-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T15:25:08.748-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@b07 (truncated)...]
2024-05-03T15:25:08.753-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T15:25:08.753-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:25:08.753677}
2024-05-03T15:25:08.754-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T15:25:08.753677}
2024-05-03T15:25:08.754-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T15:25:08.758-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:25:08.761-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@5c066ea)]
2024-05-03T15:25:08.765-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:25:33.042-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T15:25:33.046-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T15:25:33.056-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@7a0d1d60]
2024-05-03T15:25:33.061-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 5
2024-05-03T15:25:33.063-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=100.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T15:25:33.063666}
2024-05-03T15:25:33.065-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-6] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=100.00, currency='USD', newBalance=300.00, timestamp=2024-05-03T15:25:33.063666}
2024-05-03T15:25:33.069-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:25:33.069-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@18b58301]
2024-05-03T15:25:33.070-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:25:38.976-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T15:25:38.978-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T15:25:38.980-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@778d56e1]
2024-05-03T15:25:38.984-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 6
2024-05-03T15:25:38.985-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user1', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=300.00, timestamp=2024-05-03T15:25:38.985836}
2024-05-03T15:25:39.002-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-7] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user1', messageId='msg001', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=300.00, timestamp=2024-05-03T15:25:38.985836}
2024-05-03T15:25:39.004-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:25:39.004-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@9c5e768]
2024-05-03T15:25:39.005-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:25:49.026-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T15:25:49.026-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T15:25:49.028-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@3acf9ad3]
2024-05-03T15:25:49.029-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 7
2024-05-03T15:25:49.029-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T15:25:49.029776}
2024-05-03T15:25:49.030-07:00  INFO 7156 --- [banking-app] [http-nio-8080-exec-8] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=250.00, timestamp=2024-05-03T15:25:49.029776}
2024-05-03T15:25:49.031-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T15:25:49.032-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@340873fa]
2024-05-03T15:25:49.033-07:00 DEBUG 7156 --- [banking-app] [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T15:55:00.634-07:00  WARN 7156 --- [banking-app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m299ms).
2024-05-03T17:05:20.252-07:00  WARN 7156 --- [banking-app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m19s30ms).
2024-05-03T17:17:25.380-07:00  INFO 10895 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Starting LoadFundsIntegrationTest using Java 17.0.10 with PID 10895 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:17:25.381-07:00  INFO 10895 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:17:25.614-07:00  INFO 10895 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:17:25.634-07:00  INFO 10895 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-05-03T17:17:25.842-07:00  INFO 10895 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:17:25.849-07:00  INFO 10895 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:17:25.850-07:00  INFO 10895 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:17:25.878-07:00  INFO 10895 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:17:25.878-07:00  INFO 10895 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 489 ms
2024-05-03T17:17:25.944-07:00  INFO 10895 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:17:25.968-07:00  INFO 10895 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:17:25.982-07:00  INFO 10895 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:17:26.080-07:00  INFO 10895 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:17:26.090-07:00  INFO 10895 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:17:26.301-07:00  INFO 10895 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@792e8181
2024-05-03T17:17:26.301-07:00  INFO 10895 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:17:26.694-07:00  INFO 10895 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:17:26.757-07:00  INFO 10895 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:17:26.785-07:00  WARN 10895 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:17:26.818-07:00 DEBUG 10895 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:17:26.862-07:00 DEBUG 10895 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:17:26.877-07:00 DEBUG 10895 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:17:26.890-07:00 DEBUG 10895 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:17:27.050-07:00  INFO 10895 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52508 (http) with context path ''
2024-05-03T17:17:27.054-07:00  INFO 10895 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Started LoadFundsIntegrationTest in 1.803 seconds (process running for 2.237)
2024-05-03T17:17:27.056-07:00  WARN 10895 --- [banking-app] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [apoorva.current.banking.integrations.LoadFundsIntegrationTest@4e797a39]

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'apoorva.current.banking.integrations.LoadFundsIntegrationTest': Unsatisfied dependency expressed through field 'restTemplate': No qualifying bean of type 'org.springframework.web.client.RestTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:398) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:143) ~[spring-test-6.1.6.jar:6.1.6]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.6.jar:6.1.6]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.6.jar:6.1.6]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.6.jar:6.1.6]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(Unknown Source) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(Unknown Source) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(Unknown Source) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(Unknown Source) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Unknown Source) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Unknown Source) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(Unknown Source) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Unknown Source) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(Unknown Source) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(Unknown Source) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:94) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:52) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:70) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98) ~[.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:40) ~[.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:529) ~[.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:757) ~[.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:452) ~[.cp/:na]
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210) ~[.cp/:na]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.web.client.RestTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1880) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1406) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.6.jar:6.1.6]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.6.jar:6.1.6]
	... 76 common frames omitted

2024-05-03T17:17:27.078-07:00  INFO 10895 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:17:27.080-07:00  INFO 10895 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:17:27.083-07:00  INFO 10895 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:24:02.585-07:00  INFO 11177 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Starting LoadFundsIntegrationTest using Java 17.0.10 with PID 11177 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:24:02.586-07:00  INFO 11177 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:24:02.821-07:00  INFO 11177 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:24:02.841-07:00  INFO 11177 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-05-03T17:24:03.049-07:00  INFO 11177 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:24:03.055-07:00  INFO 11177 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:24:03.055-07:00  INFO 11177 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:24:03.083-07:00  INFO 11177 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:24:03.083-07:00  INFO 11177 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 489 ms
2024-05-03T17:24:03.149-07:00  INFO 11177 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:24:03.174-07:00  INFO 11177 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:24:03.187-07:00  INFO 11177 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:24:03.288-07:00  INFO 11177 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:24:03.298-07:00  INFO 11177 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:24:03.484-07:00  INFO 11177 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12608986
2024-05-03T17:24:03.485-07:00  INFO 11177 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:24:03.862-07:00  INFO 11177 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:24:03.919-07:00  INFO 11177 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:24:03.953-07:00  WARN 11177 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:24:03.983-07:00 DEBUG 11177 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:24:04.030-07:00 DEBUG 11177 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:24:04.045-07:00 DEBUG 11177 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:24:04.057-07:00 DEBUG 11177 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:24:04.197-07:00  INFO 11177 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52599 (http) with context path ''
2024-05-03T17:24:04.201-07:00  INFO 11177 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Started LoadFundsIntegrationTest in 1.744 seconds (process running for 2.173)
2024-05-03T17:24:04.531-07:00  INFO 11177 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:24:04.533-07:00  INFO 11177 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:24:04.540-07:00  INFO 11177 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:25:36.466-07:00  INFO 11230 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Starting LoadFundsIntegrationTest using Java 17.0.10 with PID 11230 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:25:36.467-07:00  INFO 11230 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:25:36.703-07:00  INFO 11230 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:25:36.724-07:00  INFO 11230 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-05-03T17:25:36.947-07:00  INFO 11230 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:25:36.953-07:00  INFO 11230 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:25:36.953-07:00  INFO 11230 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:25:36.981-07:00  INFO 11230 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:25:36.981-07:00  INFO 11230 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 506 ms
2024-05-03T17:25:37.046-07:00  INFO 11230 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:25:37.071-07:00  INFO 11230 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:25:37.085-07:00  INFO 11230 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:25:37.182-07:00  INFO 11230 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:25:37.193-07:00  INFO 11230 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:25:37.375-07:00  INFO 11230 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5e1d1524
2024-05-03T17:25:37.375-07:00  INFO 11230 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:25:37.747-07:00  INFO 11230 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:25:37.800-07:00  INFO 11230 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:25:37.837-07:00  WARN 11230 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:25:37.886-07:00 DEBUG 11230 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:25:37.936-07:00 DEBUG 11230 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:25:37.950-07:00 DEBUG 11230 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:25:37.962-07:00 DEBUG 11230 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:25:38.106-07:00  INFO 11230 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52650 (http) with context path ''
2024-05-03T17:25:38.111-07:00  INFO 11230 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Started LoadFundsIntegrationTest in 1.772 seconds (process running for 2.236)
2024-05-03T17:25:38.417-07:00 DEBUG 11230 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP POST http://localhost:52650/load
2024-05-03T17:25:38.435-07:00 DEBUG 11230 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:25:38.439-07:00 DEBUG 11230 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [LoadRequest(userId=user12, messageId=msg001, transactionAmount=apoorva.current.banking.dto.Amount@70a26eca)] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:25:38.464-07:00  INFO 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:25:38.464-07:00  INFO 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:25:38.464-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:25:38.464-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:25:38.464-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:25:38.464-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2b6a4da7
2024-05-03T17:25:38.465-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@22a2e581
2024-05-03T17:25:38.465-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:25:38.465-07:00  INFO 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-03T17:25:38.467-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/load", parameters={}
2024-05-03T17:25:38.472-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler apoorva.current.banking.controller.GlobalExceptionHandler#handleException(Exception)
2024-05-03T17:25:38.474-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:25:38.474-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.controller.GlobalExceptionHandler$ErrorResponse@5ca10b81]
2024-05-03T17:25:38.476-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]
2024-05-03T17:25:38.477-07:00 DEBUG 11230 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2024-05-03T17:25:38.477-07:00 DEBUG 11230 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 500 INTERNAL_SERVER_ERROR
2024-05-03T17:25:38.477-07:00 DEBUG 11230 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.LoadResponse]
2024-05-03T17:25:38.496-07:00  INFO 11230 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:25:38.497-07:00  INFO 11230 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:25:38.501-07:00  INFO 11230 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:28:33.761-07:00  INFO 11396 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Starting LoadFundsIntegrationTest using Java 17.0.10 with PID 11396 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:28:33.762-07:00  INFO 11396 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:28:33.995-07:00  INFO 11396 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:28:34.015-07:00  INFO 11396 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 2 JPA repository interfaces.
2024-05-03T17:28:34.226-07:00  INFO 11396 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:28:34.232-07:00  INFO 11396 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:28:34.232-07:00  INFO 11396 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:28:34.260-07:00  INFO 11396 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:28:34.260-07:00  INFO 11396 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 490 ms
2024-05-03T17:28:34.323-07:00  INFO 11396 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:28:34.348-07:00  INFO 11396 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:28:34.362-07:00  INFO 11396 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:28:34.474-07:00  INFO 11396 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:28:34.485-07:00  INFO 11396 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:28:34.678-07:00  INFO 11396 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53fbb2b4
2024-05-03T17:28:34.679-07:00  INFO 11396 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:28:35.063-07:00  INFO 11396 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:28:35.120-07:00  INFO 11396 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:28:35.155-07:00  WARN 11396 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:28:35.191-07:00 DEBUG 11396 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:28:35.239-07:00 DEBUG 11396 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:28:35.254-07:00 DEBUG 11396 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:28:35.266-07:00 DEBUG 11396 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:28:35.412-07:00  INFO 11396 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52700 (http) with context path ''
2024-05-03T17:28:35.416-07:00  INFO 11396 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Started LoadFundsIntegrationTest in 1.797 seconds (process running for 2.225)
2024-05-03T17:28:35.722-07:00 DEBUG 11396 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP PUT http://localhost:52700/load
2024-05-03T17:28:35.740-07:00 DEBUG 11396 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:28:35.743-07:00 DEBUG 11396 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [LoadRequest(userId=user12, messageId=msg001, transactionAmount=apoorva.current.banking.dto.Amount@4708acc6)] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:28:35.769-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:28:35.769-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:28:35.769-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:28:35.769-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:28:35.769-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:28:35.770-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1013aa94
2024-05-03T17:28:35.770-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5cd6a827
2024-05-03T17:28:35.770-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:28:35.770-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-03T17:28:35.772-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T17:28:35.775-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T17:28:35.786-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user12, messageId=msg001, transactionAmount=apoorva.current.banking.dto.Amount@6e (truncated)...]
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user12', initialBalance=0, currency='USD', timestamp=2024-05-03T17:28:35.792409}
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user12', initialBalance=0, currency='USD', timestamp=2024-05-03T17:28:35.792409}
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user12', messageId='msg001', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T17:28:35.792714}
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user12', messageId='msg001', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T17:28:35.792714}
2024-05-03T17:28:35.792-07:00  INFO 11396 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T17:28:35.796-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:28:35.797-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user12, messageId=msg001, balance=apoorva.current.banking.dto.Amount@169a6740)]
2024-05-03T17:28:35.798-07:00 DEBUG 11396 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T17:28:35.798-07:00 DEBUG 11396 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 201 CREATED
2024-05-03T17:28:35.799-07:00 DEBUG 11396 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.LoadResponse]
2024-05-03T17:28:35.815-07:00  INFO 11396 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:28:35.816-07:00  INFO 11396 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:28:35.819-07:00  INFO 11396 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:30:03.781-07:00  INFO 11496 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Starting LoadFundsIntegrationTest using Java 17.0.10 with PID 11496 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:30:03.783-07:00  INFO 11496 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:30:04.022-07:00  INFO 11496 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:30:04.043-07:00  INFO 11496 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-05-03T17:30:04.249-07:00  INFO 11496 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:30:04.254-07:00  INFO 11496 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:30:04.254-07:00  INFO 11496 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:30:04.282-07:00  INFO 11496 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:30:04.282-07:00  INFO 11496 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 491 ms
2024-05-03T17:30:04.348-07:00  INFO 11496 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:30:04.372-07:00  INFO 11496 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:30:04.386-07:00  INFO 11496 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:30:04.480-07:00  INFO 11496 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:30:04.491-07:00  INFO 11496 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:30:04.682-07:00  INFO 11496 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@30e2016a
2024-05-03T17:30:04.683-07:00  INFO 11496 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:30:05.064-07:00  INFO 11496 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:30:05.111-07:00  INFO 11496 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:30:05.146-07:00  WARN 11496 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:30:05.179-07:00 DEBUG 11496 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:30:05.222-07:00 DEBUG 11496 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:30:05.242-07:00 DEBUG 11496 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:30:05.255-07:00 DEBUG 11496 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:30:05.396-07:00  INFO 11496 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52721 (http) with context path ''
2024-05-03T17:30:05.400-07:00  INFO 11496 --- [banking-app] [main] a.c.b.i.LoadFundsIntegrationTest         : Started LoadFundsIntegrationTest in 1.75 seconds (process running for 2.189)
2024-05-03T17:30:05.710-07:00 DEBUG 11496 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP PUT http://localhost:52721/load
2024-05-03T17:30:05.728-07:00 DEBUG 11496 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:30:05.731-07:00 DEBUG 11496 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [LoadRequest(userId=user12, messageId=msg001, transactionAmount=apoorva.current.banking.dto.Amount@2b14628b)] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:30:05.756-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:30:05.757-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:30:05.757-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:30:05.757-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:30:05.757-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:30:05.757-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@30f99ca1
2024-05-03T17:30:05.757-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@22ba30b0
2024-05-03T17:30:05.758-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:30:05.758-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-03T17:30:05.760-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T17:30:05.763-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T17:30:05.775-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user12, messageId=msg001, transactionAmount=apoorva.current.banking.dto.Amount@52 (truncated)...]
2024-05-03T17:30:05.780-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T17:30:05.781-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user12', initialBalance=0, currency='USD', timestamp=2024-05-03T17:30:05.781101}
2024-05-03T17:30:05.781-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user12', initialBalance=0, currency='USD', timestamp=2024-05-03T17:30:05.781101}
2024-05-03T17:30:05.781-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T17:30:05.781-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user12', messageId='msg001', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T17:30:05.781467}
2024-05-03T17:30:05.782-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user12', messageId='msg001', amountLoaded=50.00, currency='USD', newBalance=0, timestamp=2024-05-03T17:30:05.781467}
2024-05-03T17:30:05.782-07:00  INFO 11496 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T17:30:05.786-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:30:05.786-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user12, messageId=msg001, balance=apoorva.current.banking.dto.Amount@5e06442)]
2024-05-03T17:30:05.788-07:00 DEBUG 11496 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T17:30:05.788-07:00 DEBUG 11496 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 201 CREATED
2024-05-03T17:30:05.788-07:00 DEBUG 11496 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.LoadResponse]
2024-05-03T17:30:05.802-07:00  INFO 11496 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:30:05.803-07:00  INFO 11496 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:30:05.806-07:00  INFO 11496 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:35:22.187-07:00  INFO 11704 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Starting AuthorizeIntegrationTest using Java 17.0.10 with PID 11704 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:35:22.188-07:00  INFO 11704 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:35:22.481-07:00  INFO 11704 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:35:22.504-07:00  INFO 11704 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T17:35:22.716-07:00  INFO 11704 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:35:22.722-07:00  INFO 11704 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:35:22.722-07:00  INFO 11704 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:35:22.751-07:00  INFO 11704 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:35:22.751-07:00  INFO 11704 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 554 ms
2024-05-03T17:35:22.822-07:00  INFO 11704 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:35:22.847-07:00  INFO 11704 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:35:22.862-07:00  INFO 11704 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:35:22.961-07:00  INFO 11704 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:35:22.972-07:00  INFO 11704 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:35:23.175-07:00  INFO 11704 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@59b98ad1
2024-05-03T17:35:23.176-07:00  INFO 11704 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:35:23.564-07:00  INFO 11704 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:35:23.620-07:00  INFO 11704 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:35:23.656-07:00  WARN 11704 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:35:23.689-07:00 DEBUG 11704 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:35:23.732-07:00 DEBUG 11704 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:35:23.751-07:00 DEBUG 11704 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:35:23.765-07:00 DEBUG 11704 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:35:23.910-07:00  INFO 11704 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52823 (http) with context path ''
2024-05-03T17:35:23.915-07:00  INFO 11704 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Started AuthorizeIntegrationTest in 1.857 seconds (process running for 2.289)
2024-05-03T17:35:24.221-07:00 DEBUG 11704 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP PUT http://localhost:52823/authorization
2024-05-03T17:35:24.240-07:00 DEBUG 11704 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:35:24.244-07:00 DEBUG 11704 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [apoorva.current.banking.dto.AuthorizationRequest@32ae890] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:35:24.270-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:35:24.270-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@44bd7f24
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@3006aef5
2024-05-03T17:35:24.271-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:35:24.271-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2024-05-03T17:35:24.274-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T17:35:24.277-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T17:35:24.288-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@7a54533f]
2024-05-03T17:35:24.294-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T17:35:24.294-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:35:24.294325}
2024-05-03T17:35:24.295-07:00  INFO 11704 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:35:24.294325}
2024-05-03T17:35:24.299-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:35:24.300-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@8331dd4]
2024-05-03T17:35:24.301-07:00 DEBUG 11704 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T17:35:24.301-07:00 DEBUG 11704 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 201 CREATED
2024-05-03T17:35:24.302-07:00 DEBUG 11704 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.AuthorizationResponse]
2024-05-03T17:35:24.319-07:00  INFO 11704 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:35:24.320-07:00  INFO 11704 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:35:24.323-07:00  INFO 11704 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:37:15.619-07:00  INFO 11737 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Starting AuthorizeIntegrationTest using Java 17.0.10 with PID 11737 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:37:15.621-07:00  INFO 11737 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:37:15.870-07:00  INFO 11737 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:37:15.890-07:00  INFO 11737 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-05-03T17:37:16.099-07:00  INFO 11737 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:37:16.104-07:00  INFO 11737 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:37:16.104-07:00  INFO 11737 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:37:16.145-07:00  INFO 11737 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:37:16.146-07:00  INFO 11737 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 517 ms
2024-05-03T17:37:16.208-07:00  INFO 11737 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:37:16.228-07:00  INFO 11737 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:37:16.239-07:00  INFO 11737 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:37:16.319-07:00  INFO 11737 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:37:16.328-07:00  INFO 11737 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:37:16.473-07:00  INFO 11737 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@591e5fd4
2024-05-03T17:37:16.473-07:00  INFO 11737 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:37:16.825-07:00  INFO 11737 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:37:16.869-07:00  INFO 11737 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:37:16.904-07:00  WARN 11737 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:37:16.935-07:00 DEBUG 11737 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:37:16.978-07:00 DEBUG 11737 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:37:16.994-07:00 DEBUG 11737 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:37:17.005-07:00 DEBUG 11737 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:37:17.159-07:00  INFO 11737 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52874 (http) with context path ''
2024-05-03T17:37:17.163-07:00  INFO 11737 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Started AuthorizeIntegrationTest in 1.665 seconds (process running for 2.073)
2024-05-03T17:37:17.480-07:00 DEBUG 11737 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP PUT http://localhost:52874/authorization
2024-05-03T17:37:17.500-07:00 DEBUG 11737 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:37:17.504-07:00 DEBUG 11737 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [apoorva.current.banking.dto.AuthorizationRequest@45bb502f] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:37:17.533-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:37:17.533-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:37:17.533-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:37:17.533-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:37:17.533-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:37:17.534-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6e3acd7
2024-05-03T17:37:17.534-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@16257f8c
2024-05-03T17:37:17.534-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:37:17.534-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-03T17:37:17.539-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T17:37:17.548-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T17:37:17.573-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@6ed755d2]
2024-05-03T17:37:17.589-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T17:37:17.589-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:37:17.589805}
2024-05-03T17:37:17.592-07:00  INFO 11737 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:37:17.589805}
2024-05-03T17:37:17.603-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:37:17.604-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@ddc7da]
2024-05-03T17:37:17.607-07:00 DEBUG 11737 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T17:37:17.614-07:00 DEBUG 11737 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 201 CREATED
2024-05-03T17:37:17.616-07:00 DEBUG 11737 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.AuthorizationResponse]
2024-05-03T17:37:17.634-07:00  INFO 11737 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:37:17.635-07:00  INFO 11737 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:37:17.638-07:00  INFO 11737 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T17:37:58.479-07:00  INFO 11756 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Starting AuthorizeIntegrationTest using Java 17.0.10 with PID 11756 (started by apoorvashete in /Users/apoorvashete/Downloads/banking-app)
2024-05-03T17:37:58.480-07:00  INFO 11756 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : No active profile set, falling back to 1 default profile: "default"
2024-05-03T17:37:58.701-07:00  INFO 11756 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T17:37:58.722-07:00  INFO 11756 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2024-05-03T17:37:58.925-07:00  INFO 11756 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-05-03T17:37:58.930-07:00  INFO 11756 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T17:37:58.930-07:00  INFO 11756 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T17:37:58.956-07:00  INFO 11756 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T17:37:58.956-07:00  INFO 11756 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 469 ms
2024-05-03T17:37:59.017-07:00  INFO 11756 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T17:37:59.036-07:00  INFO 11756 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T17:37:59.047-07:00  INFO 11756 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T17:37:59.131-07:00  INFO 11756 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T17:37:59.140-07:00  INFO 11756 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T17:37:59.293-07:00  INFO 11756 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@430aae8e
2024-05-03T17:37:59.294-07:00  INFO 11756 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T17:37:59.656-07:00  INFO 11756 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T17:37:59.701-07:00  INFO 11756 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:37:59.741-07:00  WARN 11756 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T17:37:59.773-07:00 DEBUG 11756 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T17:37:59.822-07:00 DEBUG 11756 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T17:37:59.837-07:00 DEBUG 11756 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T17:37:59.849-07:00 DEBUG 11756 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T17:37:59.990-07:00  INFO 11756 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 52906 (http) with context path ''
2024-05-03T17:37:59.995-07:00  INFO 11756 --- [banking-app] [main] a.c.b.i.AuthorizeIntegrationTest         : Started AuthorizeIntegrationTest in 1.634 seconds (process running for 2.032)
2024-05-03T17:38:00.307-07:00 DEBUG 11756 --- [banking-app] [main] o.s.web.client.RestTemplate              : HTTP PUT http://localhost:52906/authorization
2024-05-03T17:38:00.325-07:00 DEBUG 11756 --- [banking-app] [main] o.s.web.client.RestTemplate              : Accept=[application/json, application/*+json]
2024-05-03T17:38:00.329-07:00 DEBUG 11756 --- [banking-app] [main] o.s.web.client.RestTemplate              : Writing [apoorva.current.banking.dto.AuthorizationRequest@1c74251b] with org.springframework.http.converter.json.MappingJackson2HttpMessageConverter
2024-05-03T17:38:00.369-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T17:38:00.370-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T17:38:00.370-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T17:38:00.370-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T17:38:00.370-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T17:38:00.370-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@21457b14
2024-05-03T17:38:00.370-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2dc319cf
2024-05-03T17:38:00.371-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T17:38:00.371-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-03T17:38:00.374-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T17:38:00.382-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T17:38:00.400-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@52b8a4ad]
2024-05-03T17:38:00.409-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T17:38:00.409-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:38:00.409981}
2024-05-03T17:38:00.413-07:00  INFO 11756 --- [banking-app] [http-nio-auto-1-exec-1] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user12', messageId='msg002', amountAttempted=50.00, currency='USD', reason='Account not found', currentBalance=0, timestamp=2024-05-03T17:38:00.409981}
2024-05-03T17:38:00.418-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, application/*+json] and supported [application/json, application/*+json]
2024-05-03T17:38:00.418-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@25298234]
2024-05-03T17:38:00.420-07:00 DEBUG 11756 --- [banking-app] [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T17:38:00.420-07:00 DEBUG 11756 --- [banking-app] [main] o.s.web.client.RestTemplate              : Response 201 CREATED
2024-05-03T17:38:00.421-07:00 DEBUG 11756 --- [banking-app] [main] o.s.web.client.RestTemplate              : Reading to [apoorva.current.banking.dto.AuthorizationResponse]
2024-05-03T17:38:00.435-07:00  INFO 11756 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T17:38:00.437-07:00  INFO 11756 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T17:38:00.440-07:00  INFO 11756 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T18:46:19.746-07:00  WARN 7156 --- [banking-app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m58s451ms).
2024-05-03T19:05:22.597-07:00  WARN 7156 --- [banking-app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m799ms).
2024-05-03T19:22:09.712-07:00  INFO 7156 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T19:22:09.733-07:00  INFO 7156 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T19:22:09.770-07:00  INFO 7156 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-05-03T19:26:17.487-07:00  INFO 15760 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Starting BankingAppApplication using Java 17.0.10 with PID 15760 (/Users/apoorvashete/Desktop/banking-app/target/classes started by apoorvashete in /Users/apoorvashete/Desktop/banking-app)
2024-05-03T19:26:17.492-07:00  INFO 15760 --- [banking-app] [main] a.current.banking.BankingAppApplication  : No active profile set, falling back to 1 default profile: "default"
2024-05-03T19:26:17.787-07:00  INFO 15760 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-05-03T19:26:17.809-07:00  INFO 15760 --- [banking-app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-05-03T19:26:18.149-07:00  INFO 15760 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2024-05-03T19:26:18.169-07:00  INFO 15760 --- [banking-app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-03T19:26:18.169-07:00  INFO 15760 --- [banking-app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-03T19:26:18.224-07:00  INFO 15760 --- [banking-app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-05-03T19:26:18.224-07:00  INFO 15760 --- [banking-app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 706 ms
2024-05-03T19:26:18.337-07:00  INFO 15760 --- [banking-app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-05-03T19:26:18.362-07:00  INFO 15760 --- [banking-app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2024-05-03T19:26:18.375-07:00  INFO 15760 --- [banking-app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-05-03T19:26:18.468-07:00  INFO 15760 --- [banking-app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-05-03T19:26:18.478-07:00  INFO 15760 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-05-03T19:26:18.748-07:00  INFO 15760 --- [banking-app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7657d90b
2024-05-03T19:26:18.749-07:00  INFO 15760 --- [banking-app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-05-03T19:26:19.165-07:00  INFO 15760 --- [banking-app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-05-03T19:26:19.256-07:00  INFO 15760 --- [banking-app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T19:26:19.295-07:00  WARN 15760 --- [banking-app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-05-03T19:26:19.378-07:00 DEBUG 15760 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2024-05-03T19:26:19.415-07:00 DEBUG 15760 --- [banking-app] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-05-03T19:26:19.430-07:00 DEBUG 15760 --- [banking-app] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-05-03T19:26:19.442-07:00 DEBUG 15760 --- [banking-app] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-05-03T19:26:19.599-07:00  INFO 15760 --- [banking-app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2024-05-03T19:26:19.603-07:00  INFO 15760 --- [banking-app] [main] a.current.banking.BankingAppApplication  : Started BankingAppApplication in 2.345 seconds (process running for 2.563)
2024-05-03T19:26:29.289-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-03T19:26:29.290-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-03T19:26:29.290-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2024-05-03T19:26:29.290-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2024-05-03T19:26:29.290-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2024-05-03T19:26:29.293-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6f071d0c
2024-05-03T19:26:29.293-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b552b13
2024-05-03T19:26:29.293-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-05-03T19:26:29.293-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-05-03T19:26:29.299-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T19:26:29.306-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T19:26:29.358-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@748 (truncated)...]
2024-05-03T19:26:29.370-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 0
2024-05-03T19:26:29.372-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T19:26:29.372216}
2024-05-03T19:26:29.372-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: AccountCreatedEvent{userId='user1', initialBalance=0, currency='USD', timestamp=2024-05-03T19:26:29.372216}
2024-05-03T19:26:29.372-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 1
2024-05-03T19:26:29.372-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T19:26:29.372758}
2024-05-03T19:26:29.373-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T19:26:29.372758}
2024-05-03T19:26:29.373-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-1] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T19:26:29.384-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T19:26:29.385-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@1949ba0f)]
2024-05-03T19:26:29.392-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T19:26:31.282-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/load", parameters={}
2024-05-03T19:26:31.284-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#loadFunds(LoadRequest)
2024-05-03T19:26:31.289-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoadRequest(userId=user1, messageId=msg002, transactionAmount=apoorva.current.banking.dto.Amount@1ba (truncated)...]
2024-05-03T19:26:31.291-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 2
2024-05-03T19:26:31.291-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Adding event: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T19:26:31.291800}
2024-05-03T19:26:31.292-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.service.TransactionService   : Event published and stored: FundsLoadedEvent{userId='user1', messageId='msg002', amountLoaded=100.00, currency='USD', newBalance=0, timestamp=2024-05-03T19:26:31.291800}
2024-05-03T19:26:31.292-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-3] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T19:26:31.293-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T19:26:31.294-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoadResponse(userId=user1, messageId=msg002, balance=apoorva.current.banking.dto.Amount@15603013)]
2024-05-03T19:26:31.296-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T19:26:36.229-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T19:26:36.232-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T19:26:36.252-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@48493524]
2024-05-03T19:26:36.256-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 3
2024-05-03T19:26:36.258-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T19:26:36.258692}
2024-05-03T19:26:36.260-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-4] a.c.banking.service.TransactionService   : Event published and stored: TransactionAuthorizedEvent{userId='user1', messageId='msg001', amountAuthorized=50.00, currency='USD', newBalance=150.00, timestamp=2024-05-03T19:26:36.258692}
2024-05-03T19:26:36.264-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T19:26:36.265-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@39d6575f]
2024-05-03T19:26:36.267-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T19:26:50.988-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/authorization", parameters={}
2024-05-03T19:26:50.991-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to apoorva.current.banking.controller.TransactionController#authorizeTransaction(AuthorizationRequest)
2024-05-03T19:26:50.996-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [apoorva.current.banking.dto.AuthorizationRequest@29ca05b7]
2024-05-03T19:26:51.016-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Retrieving events, total count: 4
2024-05-03T19:26:51.025-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.store.InMemoryEventStore     : Adding event: TransactionDeclinedEvent{userId='user1', messageId='msg002', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=150.00, timestamp=2024-05-03T19:26:51.025361}
2024-05-03T19:26:51.032-07:00  INFO 15760 --- [banking-app] [http-nio-8080-exec-5] a.c.banking.service.TransactionService   : Event published and stored: TransactionDeclinedEvent{userId='user1', messageId='msg002', amountAttempted=500.00, currency='USD', reason='Insufficient funds', currentBalance=150.00, timestamp=2024-05-03T19:26:51.025361}
2024-05-03T19:26:51.034-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-05-03T19:26:51.035-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [apoorva.current.banking.dto.AuthorizationResponse@1e1ff640]
2024-05-03T19:26:51.036-07:00 DEBUG 15760 --- [banking-app] [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 201 CREATED
2024-05-03T19:27:18.251-07:00  INFO 15760 --- [banking-app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-05-03T19:27:18.256-07:00  INFO 15760 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-05-03T19:27:18.277-07:00  INFO 15760 --- [banking-app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
